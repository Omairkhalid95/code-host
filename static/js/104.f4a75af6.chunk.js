(this.webpackJsonpemilus=this.webpackJsonpemilus||[]).push([[104],{328:function(e,a,t){"use strict";t.r(a);var n=t(1),c=t(6),l=t(14),r=t(12),i=t(7),o=t(775),u=t(859),s=t(129),d=t(790),j=t(515),b=t(1019),m=t(167),O=t(926),p=t(125),h=t(303),v=t(768),f=t(769),C=t(519),x=t(763),S=t(187),y=t(23),g=t(149),I=t(57),E=t(0),T=t.n(E),A=t(44),N=t(252),L=t(15),D=t(140),P=t(257),_=t(3),k=j.a.useBreakpoint;a.default=function(e){var a,t,j,U=e.setIsVisible,w=e.onCancel,F=e.editAccounts,R=e.handleRefresh,M=Object(E.useState)(!1),G=Object(i.a)(M,2),H=G[0],V=G[1],q=Object(A.d)((function(e){return e.myTeams.masterData})).IndustryType,z=Object(A.d)((function(e){return e.myTeams.employeeData})),B=Object(A.d)((function(e){var a;return null===(a=e.myTeams.allLocations)||void 0===a?void 0:a.map((function(e){return e.country}))})),Y=Object(E.useState)([]),J=Object(i.a)(Y,2),X=J[0],Z=J[1],K=b.a.useForm(),Q=Object(i.a)(K,1)[0],W=m.a.Option,$=(m.a.OptGroup,O.a.confirm),ee=Object(E.useState)(!1),ae=Object(i.a)(ee,2),te=ae[0],ne=ae[1],ce=Object(E.useState)([]),le=Object(i.a)(ce,2),re=le[0],ie=le[1],oe=Object(E.useState)(null),ue=Object(i.a)(oe,2),se=ue[0],de=ue[1],je=Object(E.useState)([]),be=Object(i.a)(je,2),me=be[0],Oe=be[1],pe=Object(E.useState)(null),he=Object(i.a)(pe,2),ve=he[0],fe=he[1],Ce=Object(E.useState)(!1),xe=Object(i.a)(Ce,2),Se=xe[0],ye=xe[1],ge=!L.a.getBreakPoint(k()).includes("md"),Ie=Object(E.useState)(null),Ee=Object(i.a)(Ie,2),Te=Ee[0],Ae=Ee[1],Ne=Object(E.useState)(null),Le=Object(i.a)(Ne,2),De=Le[0],Pe=Le[1],_e=Object(E.useState)([]),ke=Object(i.a)(_e,2),Ue=ke[0],we=ke[1],Fe=Object(g.a)();Object(E.useEffect)((function(){Ze(),F&&null!==F.clientCountryLeads&&Me(null===F||void 0===F?void 0:F.clientCountryLeads)}),[]),Object(E.useEffect)((function(){we([]);var e=De?z.filter((function(e){return e.employeeId!==De})):z.filter((function(e){var a;return e.employeeId!==(null===F||void 0===F||null===(a=F.clientDeliveryHead)||void 0===a?void 0:a.employeeId)}));we(e),ve!==De||L.a.isEmpty(De)?Ae(!1):Ae(Fe(D.i.CCL_AND_CDH_DUPLICATE))}),[De,z,F,ve]);var Re=T.a.useCallback((function(){if(!F)return!0}),[]),Me=function(e){var a=null===e||void 0===e?void 0:e.map((function(e,a){return{key:a,region:e.region,functionalGroups:e.functionalGroups,employeeId:e.employeeId}}));ie(a)},Ge=function(e){var a,t={key:(re&&(null===(a=re[re.length-1])||void 0===a?void 0:a.key)||0)+1,region:se,functionalGroups:me,employeeId:ve},n=L.a.isEmpty(re)?[t]:[].concat(Object(r.a)(re),[t]);ie(n),ye(!1),ne(!0),He()},He=function(){Q.setFieldsValue({functionalGroups:[],region:null,clientCountryLeads:null}),Oe([]),de(null),fe(null)},Ve=[{title:Fe(D.a.CCLS.REGION.label),dataIndex:D.a.CCLS.REGION.name,key:D.a.CCLS.REGION.name},{title:Fe(D.a.CCLS.FUNC_GROUP.label),dataIndex:D.a.CCLS.FUNC_GROUP.name,key:D.a.CCLS.FUNC_GROUP.name,render:function(e){return null===e||void 0===e?void 0:e.join(",")}},{title:Fe(D.a.CCLS.CCL_NAME.label),dataIndex:D.a.CCLS.CCL_NAME.name,key:D.a.CCLS.CCL_NAME.name,render:function(e){var a;return null===(a=z.find((function(a){return a.employeeId===e})))||void 0===a?void 0:a.employeeName}},{title:Fe(D.g.ACTIONS),key:"actions",render:function(e){return Object(_.jsx)(p.a,{onClick:function(){return function(e){ne(!0);var a=re.filter((function(a){return a.key!==e}));ie(a)}(e.key)},id:"manage-account-delete-CCL",children:Object(_.jsx)(o.a,{})})}}],qe=function(){var e=Object(l.a)(Object(c.a)().mark((function e(a){var t,n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=P.a.prepareDataForAddAccount(a,re),e.next=3,P.a.CreateAccount(t);case 3:null!==(n=e.sent)&&void 0!==n&&n.statusCode&&(h.b.success(Fe(D.i.ADD_SUCCESS)),R(),w(),Q.resetFields());case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),ze=function(){var e=Object(l.a)(Object(c.a)().mark((function e(a){var t,n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=P.a.prepareDataForUpdateAccount(F,a,re),e.next=3,P.a.Update(null===F||void 0===F?void 0:F.accountId,t);case 3:null!==(n=e.sent)&&void 0!==n&&n.statusCode&&(h.b.success(Fe(D.i.UPDATE_SUCCESS)),R(),w(),Q.resetFields());case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Be=function(){Q.validateFields().then((function(e){Je(Object(n.a)(Object(n.a)({},e),{},{ccls:re}))&&Ye(e)})).catch((function(e){console.log(y.gb.value,e)}))},Ye=function(){var e=Object(l.a)(Object(c.a)().mark((function e(a){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,V(!0),!F){e.next=7;break}return e.next=5,ze(a);case 5:e.next=9;break;case 7:return e.next=9,qe(a);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:return e.prev=14,V(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})));return function(a){return e.apply(this,arguments)}}(),Je=function(e){var a=P.a.performDataValidations(e);return!!Object(I.isEmpty)(a)||(Ae(Fe(a)),!1)},Xe=function(){Q.isFieldsTouched()||te?$({title:y.n.value,centered:!0,onOk:function(){w()}}):w()},Ze=function(){var e=Object(l.a)(Object(c.a)().mark((function e(){var a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.fetchAllFunctionalGroupsTechnical();case 2:(a=e.sent)&&Z(a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ke={accountName:null===F||void 0===F?void 0:F.accountName,industryType:null===F||void 0===F?void 0:F.industryType,clientAddress:null===F||void 0===F?void 0:F.clientAddress,clientPortfolioManager:(null===F||void 0===F||null===(a=F.clientPortfolioManager)||void 0===a?void 0:a.employeeId)||[],clientDeliveryHead:(null===F||void 0===F||null===(t=F.clientDeliveryHead)||void 0===t?void 0:t.employeeId)||[],status:null===F||void 0===F?void 0:F.status,clientPartner:(null===F||void 0===F||null===(j=F.clientPartner)||void 0===j?void 0:j.employeeId)||[]};return Object(_.jsxs)(O.a,{visible:U,title:Fe(F?D.g.EDIT_ACCOUNT_TITLE:D.g.ADD_ACCOUNT_TITLE),onCancel:Xe,onOk:Be,width:ge?"80%":"90%",footer:[Object(_.jsx)(p.a,{onClick:Xe,id:"manage-account-cancel-btn",children:Fe(D.g.CANCEL_TEXT)},y.J.value),Object(_.jsx)(p.a,{onClick:Be,type:y.I.value,loading:H,id:"manage-account-ok-btn",children:Fe(F?D.g.UPDATE_TEXT:D.g.ADD_TEXT)},y.eb.value)],okButtonProps:{loading:H,id:"add-account-addBtn"},cancelButtonProps:{id:"add-account-cancelBtn"},closeIcon:Object(_.jsx)(s.a,{id:"add-account-close-modal-btn"}),children:[Object(_.jsxs)(b.a,Object(n.a)(Object(n.a)({},{labelCol:{span:10},wrapperCol:{span:14}}),{},{form:Q,layout:y.A.horizontal,name:D.a.FORM_NAME.name,initialValues:Ke,labelAlign:"left",children:[Object(_.jsxs)(v.a,{gutter:24,children:[Object(_.jsx)(f.a,{xs:24,md:12,lg:8,children:Object(_.jsx)(b.a.Item,{name:D.a.ACC_NAME.name,label:Fe(D.a.ACC_NAME.label),rules:[{required:!0}],children:Object(_.jsx)(C.a,{placeholder:Fe(D.a.ACC_NAME.label),id:"manage-account-account-input"})})}),Object(_.jsx)(f.a,{xs:24,md:12,lg:8,children:Object(_.jsx)(b.a.Item,{name:D.a.INDUSTRY_TYPE.name,label:Fe(D.a.INDUSTRY_TYPE.label),rules:[{required:!0}],children:Object(_.jsx)(m.a,{placeholder:Fe(D.a.INDUSTRY_TYPE.label),id:"manage-account-industry",children:null===q||void 0===q?void 0:q.map((function(e){var a;return Object(_.jsx)(W,{value:e,children:(null===(a=e.charAt(0))||void 0===a?void 0:a.toUpperCase())+e.slice(1)},e)}))})})}),Object(_.jsx)(f.a,{xs:24,md:12,lg:8,children:Object(_.jsx)(b.a.Item,{name:D.a.CLIENT_ADDRESS.name,label:Fe(D.a.CLIENT_ADDRESS.label),rules:[{required:!0}],children:Object(_.jsx)(C.a,{placeholder:Fe(D.a.CLIENT_ADDRESS.label),id:"manage-account-address-input"})})}),Object(_.jsx)(f.a,{xs:24,md:12,lg:8,children:Object(_.jsx)(b.a.Item,{name:D.a.CDH.name,label:Fe(D.a.CDH.label),rules:[{required:!0}],children:Object(_.jsx)(m.a,{placeholder:Fe(D.a.CDH.label),showSearch:!0,optionFilterProp:"children",id:"manage-account-cdh-input",onSelect:function(e){return Pe(e)},children:null===z||void 0===z?void 0:z.map((function(e){return Object(_.jsx)(W,{value:e.employeeId,children:e.employeeName},e.employeeId)}))})})}),Object(_.jsx)(f.a,{xs:24,md:12,lg:8,children:Object(_.jsx)(b.a.Item,{name:D.a.CPM.name,label:Fe(D.a.CPM.label),rules:[{required:!0}],children:Object(_.jsx)(m.a,{placeholder:Fe(D.a.CPM.label),showSearch:!0,optionFilterProp:y.j,id:"manage-account-cpm-input",children:null===z||void 0===z?void 0:z.map((function(e){return Object(_.jsx)(W,{value:e.employeeId,children:e.employeeName},e.employeeId)}))})})}),Object(_.jsx)(f.a,{xs:24,md:12,lg:8,children:Object(_.jsx)(b.a.Item,{name:D.a.CP.name,label:Fe(D.a.CP.label),rules:[{required:!0}],children:Object(_.jsx)(m.a,{placeholder:Fe(D.a.CP.label),showSearch:!0,optionFilterProp:y.j,id:"manage-account-cpm-input",children:null===z||void 0===z?void 0:z.map((function(e){return Object(_.jsx)(W,{value:e.employeeId,children:e.employeeName},e.employeeId)}))})})}),Object(_.jsx)(f.a,{xs:24,md:12,lg:8,children:Object(_.jsx)(b.a.Item,{name:D.a.STATUS.name,label:Fe(D.a.STATUS.label),rules:[{required:!Re()}],initialValue:D.j.ACTIVE_STATUS.value,children:Re()?Object(_.jsx)("span",{className:"profile-text-color",children:y.e.text}):Object(_.jsx)(m.a,{placeholder:Fe(D.a.STATUS.label),allowClear:!0,id:"manage-account-status-input",children:Object.values(D.j).filter((function(e){return e.value!==D.j.ALL_STATUS.value})).map((function(e){return Object(_.jsx)(W,{value:e.value,children:Fe(e.label)})}))})})})]}),Object(_.jsxs)(v.a,{className:"mb-2",children:[Object(_.jsx)(f.a,{xs:12,md:4,lg:4,children:Object(_.jsx)("span",{children:Object(_.jsx)("h3",{children:Fe(D.a.CCLS.title)})})}),Object(_.jsx)(f.a,{xs:12,md:4,lg:4,children:Object(_.jsx)(p.a,{onClick:function(){ye(!0)},id:"manage-account-show-ccl-btn",children:Object(_.jsx)(d.a,{})})}),Te&&Object(_.jsx)(f.a,{xs:12,md:16,children:Object(_.jsxs)("div",{style:{color:"red"},children:["* ",Te]})})]}),Se&&Object(_.jsxs)(v.a,{gutter:12,children:[Object(_.jsx)(f.a,{xs:24,md:12,lg:6,children:Object(_.jsx)(b.a.Item,{name:D.a.CCLS.REGION.name,label:Fe(D.a.CCLS.REGION.label),required:!0,rules:[{required:!0}],children:Object(_.jsx)(m.a,{placeholder:Fe(D.a.CCLS.REGION.label),showSearch:!0,optionFilterProp:y.j,onSelect:function(e){return de(e)},id:"manage-account-region-input",children:L.a.sortArray(B).map((function(e){return Object(_.jsx)(W,{value:e,children:e},e)}))})})}),Object(_.jsx)(f.a,{xs:24,md:12,lg:6,children:Object(_.jsx)(b.a.Item,{name:D.a.CCLS.FUNC_GROUP.name,label:Fe(D.a.CCLS.FUNC_GROUP.label),required:!0,rules:[{required:!0}],children:Object(_.jsx)(m.a,{id:"manage-account-functionalgroup-input",placeholder:Fe(D.a.CCLS.FUNC_GROUP.label),showSearch:!0,showArrow:!0,optionFilterProp:y.j,onChange:function(e){return Oe(e)},mode:y.Z.MULTIPLE,children:null===X||void 0===X?void 0:X.map((function(e){return Object(_.jsx)(W,{value:e,children:e},e)}))})})}),Object(_.jsx)(f.a,{xs:24,md:12,lg:6,children:Object(_.jsx)(b.a.Item,{name:D.a.CCLS.CCL.name,label:Fe(D.a.CCLS.CCL.label),required:!0,rules:[{required:!0}],children:Object(_.jsx)(m.a,{placeholder:Fe(D.a.CCLS.CCL.label),showSearch:!0,optionFilterProp:y.j,onSelect:function(e){return fe(e)},id:"manage-account-ccl-input",children:null===Ue||void 0===Ue?void 0:Ue.map((function(e){return Object(_.jsx)(W,{value:e.employeeId,children:e.employeeName},e.employeeId)}))})})}),Object(_.jsx)(f.a,{xs:24,md:12,lg:6,children:Object(_.jsxs)(S.a,{alignItems:"center",children:[Object(_.jsx)("span",{className:"mr-2",children:Object(_.jsx)("h5",{children:Fe(D.g.ACTIONS)})}),Object(_.jsxs)(v.a,{children:[Object(_.jsx)(f.a,{children:L.a.isEmpty(ve)||L.a.isEmpty(se)||L.a.isEmpty(me)||ve===De&&!L.a.isEmpty(De)?null:Object(_.jsx)(p.a,{onClick:Ge,className:"mr-2",id:"manage-account-save-ccl",children:Object(_.jsx)(u.a,{})})}),Object(_.jsx)(f.a,{children:Object(_.jsx)(p.a,{onClick:function(){Q.isFieldsTouched()?$({title:y.n.value,centered:!0,onOk:function(){He(),ye(!1)}}):ye(!1)},id:"manage-account-close-btn",children:Object(_.jsx)(s.a,{})})})]})]})})]})]})),Object(_.jsx)(x.a,{dataSource:re,columns:Ve})]})}},768:function(e,a,t){"use strict";var n=t(318);a.a=n.a},769:function(e,a,t){"use strict";var n=t(319);a.a=n.a},775:function(e,a,t){"use strict";var n=t(1),c=t(0),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},r=t(13),i=function(e,a){return c.createElement(r.a,Object(n.a)(Object(n.a)({},e),{},{ref:a,icon:l}))};i.displayName="DeleteOutlined";a.a=c.forwardRef(i)},790:function(e,a,t){"use strict";var n=t(1),c=t(0),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},r=t(13),i=function(e,a){return c.createElement(r.a,Object(n.a)(Object(n.a)({},e),{},{ref:a,icon:l}))};i.displayName="PlusCircleOutlined";a.a=c.forwardRef(i)},859:function(e,a,t){"use strict";var n=t(1),c=t(0),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},r=t(13),i=function(e,a){return c.createElement(r.a,Object(n.a)(Object(n.a)({},e),{},{ref:a,icon:l}))};i.displayName="SaveOutlined";a.a=c.forwardRef(i)}}]);
//# sourceMappingURL=104.f4a75af6.chunk.js.map